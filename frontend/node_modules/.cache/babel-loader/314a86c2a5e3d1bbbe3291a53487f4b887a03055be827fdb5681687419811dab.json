{"ast":null,"code":"var _jsxFileName = \"/home/najim/Downloads/hogwarts_leaderboard/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HOUSES = [{\n  name: \"Gryff\",\n  icon: \"ü¶Å\"\n}, {\n  name: \"Slyth\",\n  icon: \"üêç\"\n}, {\n  name: \"Raven\",\n  icon: \"ü¶Ö\"\n}, {\n  name: \"Huff\",\n  icon: \"ü¶°\"\n}];\nconst API_BASE = \"http://localhost:5000\";\nfunction formatNum(n) {\n  return n.toLocaleString();\n}\nexport default function App() {\n  _s();\n  const [windowSel, setWindowSel] = useState(\"all\");\n  const [totals, setTotals] = useState({\n    Gryff: 0,\n    Slyth: 0,\n    Raven: 0,\n    Huff: 0\n  });\n  const [live, setLive] = useState(false);\n  const esRef = useRef(null);\n  async function fetchTotals(win) {\n    try {\n      const r = await fetch(`${API_BASE}/api/totals?window=${win}`);\n      const j = await r.json();\n      setTotals(j.totals);\n    } catch (err) {\n      console.error(\"Error fetching totals:\", err);\n    }\n  }\n  useEffect(() => {\n    fetchTotals(windowSel);\n  }, [windowSel]);\n  useEffect(() => {\n    if (!live) {\n      if (esRef.current) {\n        esRef.current.close();\n        esRef.current = null;\n      }\n      return;\n    }\n    const es = new EventSource(`${API_BASE}/stream`);\n    es.onmessage = () => {\n      fetchTotals(windowSel);\n    };\n    es.onerror = () => {\n      es.close();\n      esRef.current = null;\n    };\n    esRef.current = es;\n    return () => {\n      es.close();\n      esRef.current = null;\n    };\n  }, [live, windowSel]);\n  const maxPoints = Math.max(...HOUSES.map(h => totals[h.name] || 0), 1);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 700,\n      margin: \"20px auto\",\n      fontFamily: \"Arial, sans-serif\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: \"\\uD83D\\uDCCA Live Leaderboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        gap: 12,\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setLive(!live),\n        children: live ? \"‚è∏ Stop Updates\" : \"‚ñ∂ Start Updates\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: windowSel,\n        onChange: e => setWindowSel(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"5m\",\n          children: \"Last 5 minutes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1h\",\n          children: \"Last 1 hour\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"all\",\n          children: \"All Time\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 16,\n        border: \"1px solid #ddd\",\n        borderRadius: 8,\n        background: \"#fff\"\n      },\n      children: HOUSES.map(h => {\n        const points = totals[h.name] || 0;\n        const pct = Math.round(points / maxPoints * 100);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            marginBottom: 20\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: 80,\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: 6\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: \"1.2em\"\n              },\n              children: h.icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: h.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1,\n              background: \"#f2f4f7\",\n              height: 32,\n              borderRadius: 6,\n              overflow: \"hidden\",\n              marginRight: 12\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                height: \"100%\",\n                width: `${pct}%`,\n                background: \"violet#\",\n                color: \"#fff\",\n                display: \"flex\",\n                alignItems: \"center\",\n                paddingLeft: 8,\n                fontWeight: \"bold\",\n                transition: \"width 0.5s ease\"\n              },\n              children: formatNum(points)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this)]\n        }, h.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"I0iYhLwd6tk/Az/t76ekqmMtfdA=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useRef","jsxDEV","_jsxDEV","HOUSES","name","icon","API_BASE","formatNum","n","toLocaleString","App","_s","windowSel","setWindowSel","totals","setTotals","Gryff","Slyth","Raven","Huff","live","setLive","esRef","fetchTotals","win","r","fetch","j","json","err","console","error","current","close","es","EventSource","onmessage","onerror","maxPoints","Math","max","map","h","style","maxWidth","margin","fontFamily","children","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","display","justifyContent","gap","marginBottom","onClick","value","onChange","e","target","padding","border","borderRadius","background","points","pct","round","alignItems","width","fontSize","flex","height","overflow","marginRight","color","paddingLeft","fontWeight","transition","_c","$RefreshReg$"],"sources":["/home/najim/Downloads/hogwarts_leaderboard/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\n\nconst HOUSES = [\n  { name: \"Gryff\", icon: \"ü¶Å\" },\n  { name: \"Slyth\", icon: \"üêç\" },\n  { name: \"Raven\", icon: \"ü¶Ö\" },\n  { name: \"Huff\", icon: \"ü¶°\" },\n];\n\nconst API_BASE = \"http://localhost:5000\";\n\nfunction formatNum(n) {\n  return n.toLocaleString();\n}\n\nexport default function App() {\n  const [windowSel, setWindowSel] = useState(\"all\");\n  const [totals, setTotals] = useState({ Gryff: 0, Slyth: 0, Raven: 0, Huff: 0 });\n  const [live, setLive] = useState(false);\n  const esRef = useRef(null);\n\n  async function fetchTotals(win) {\n    try {\n      const r = await fetch(`${API_BASE}/api/totals?window=${win}`);\n      const j = await r.json();\n      setTotals(j.totals);\n    } catch (err) {\n      console.error(\"Error fetching totals:\", err);\n    }\n  }\n\n  useEffect(() => { fetchTotals(windowSel); }, [windowSel]);\n\n  useEffect(() => {\n    if (!live) {\n      if (esRef.current) { esRef.current.close(); esRef.current = null; }\n      return;\n    }\n    const es = new EventSource(`${API_BASE}/stream`);\n    es.onmessage = () => { fetchTotals(windowSel); };\n    es.onerror = () => { es.close(); esRef.current = null; };\n    esRef.current = es;\n    return () => { es.close(); esRef.current = null; };\n  }, [live, windowSel]);\n\n  const maxPoints = Math.max(...HOUSES.map(h => totals[h.name] || 0), 1);\n\n  return (\n    <div style={{ maxWidth: 700, margin: \"20px auto\", fontFamily: \"Arial, sans-serif\" }}>\n      <h3 style={{ textAlign: \"center\" }}>üìä Live Leaderboard</h3>\n      <div style={{ display: \"flex\", justifyContent: \"center\", gap: 12, marginBottom: 16 }}>\n        <button onClick={() => setLive(!live)}>\n          {live ? \"‚è∏ Stop Updates\" : \"‚ñ∂ Start Updates\"}\n        </button>\n        <select value={windowSel} onChange={(e) => setWindowSel(e.target.value)}>\n          <option value=\"5m\">Last 5 minutes</option>\n          <option value=\"1h\">Last 1 hour</option>\n          <option value=\"all\">All Time</option>\n        </select>\n      </div>\n\n      <div style={{ padding: 16, border: \"1px solid #ddd\", borderRadius: 8, background: \"#fff\" }}>\n        {HOUSES.map(h => {\n          const points = totals[h.name] || 0;\n          const pct = Math.round((points / maxPoints) * 100);\n          return (\n            <div key={h.name} style={{ display: \"flex\", alignItems: \"center\", marginBottom: 20 }}>\n              <div style={{ width: 80, display: \"flex\", alignItems: \"center\", gap: 6 }}>\n                <span style={{ fontSize: \"1.2em\" }}>{h.icon}</span>\n                <span>{h.name}</span>\n              </div>\n              <div style={{\n                flex: 1,\n                background: \"#f2f4f7\",\n                height: 32,\n                borderRadius: 6,\n                overflow: \"hidden\",\n                marginRight: 12,\n              }}>\n                <div style={{\n                  height: \"100%\",\n                  width: `${pct}%`,\n                  background: \"violet#\",\n                  color: \"#fff\",\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  paddingLeft: 8,\n                  fontWeight: \"bold\",\n                  transition: \"width 0.5s ease\"\n                }}>\n                  {formatNum(points)}\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}