{"ast":null,"code":"var _jsxFileName = \"/home/najim/Downloads/hogwarts_leaderboard/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HOUSES = [\"Gryff\", \"Slyth\", \"Raven\", \"Huff\"];\nconst API_BASE = \"http://localhost:5000\";\nfunction formatNum(n) {\n  return n.toLocaleString();\n}\nexport default function App() {\n  _s();\n  const [windowSel, setWindowSel] = useState(\"all\");\n  const [totals, setTotals] = useState({\n    Gryff: 0,\n    Slyth: 0,\n    Raven: 0,\n    Huff: 0\n  });\n  const [live, setLive] = useState(false);\n  const esRef = useRef(null);\n  async function fetchTotals(win) {\n    const r = await fetch(`${API_BASE}/api/totals?window=${win}`);\n    const j = await r.json();\n    setTotals(j.totals);\n  }\n  useEffect(() => {\n    fetchTotals(windowSel);\n  }, [windowSel]);\n  useEffect(() => {\n    if (!live) {\n      if (esRef.current) {\n        esRef.current.close();\n        esRef.current = null;\n      }\n      return;\n    }\n    const es = new EventSource(`${API_BASE}/stream`);\n    es.onmessage = () => {\n      fetchTotals(windowSel);\n    };\n    es.onerror = err => {\n      es.close();\n      esRef.current = null;\n    };\n    esRef.current = es;\n    return () => {\n      es.close();\n      esRef.current = null;\n    };\n  }, [live, windowSel]);\n  const maxPoints = Math.max(...HOUSES.map(h => totals[h] || 0), 1);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 900,\n      margin: \"20px auto\",\n      fontFamily: \"Arial\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83C\\uDFC6 Hogwarts House Cup \\u2014 Leaderboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        gap: 12,\n        alignItems: \"center\",\n        marginBottom: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setWindowSel(\"5m\"),\n          className: windowSel === \"5m\" ? \"sel\" : \"\",\n          children: \"Last 5 minutes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setWindowSel(\"1h\"),\n          className: windowSel === \"1h\" ? \"sel\" : \"\",\n          children: \"Last 1 hour\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setWindowSel(\"all\"),\n          className: windowSel === \"all\" ? \"sel\" : \"\",\n          children: \"All time\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginLeft: \"auto\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: live,\n            onChange: e => setLive(e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 18\n          }, this), \" Start Updates\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 12,\n        border: \"1px solid #ddd\",\n        borderRadius: 8,\n        background: \"#fff\"\n      },\n      children: HOUSES.map(house => {\n        const points = totals[house] || 0;\n        const pct = Math.round(points / maxPoints * 100);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            marginBottom: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: 90,\n              textAlign: \"right\",\n              marginRight: 12\n            },\n            children: house\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1,\n              marginRight: 12,\n              background: \"#f2f4f7\",\n              height: 36,\n              borderRadius: 6,\n              overflow: \"hidden\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                height: \"100%\",\n                width: `${pct}%`,\n                paddingLeft: 8\n              },\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: formatNum(points)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 78\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: 70\n            },\n            children: /*#__PURE__*/_jsxDEV(\"small\", {\n              children: points\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 39\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 15\n          }, this)]\n        }, house, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"/f0vh8SO0OxasOjyQORsqntQXUU=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useRef","jsxDEV","_jsxDEV","HOUSES","API_BASE","formatNum","n","toLocaleString","App","_s","windowSel","setWindowSel","totals","setTotals","Gryff","Slyth","Raven","Huff","live","setLive","esRef","fetchTotals","win","r","fetch","j","json","current","close","es","EventSource","onmessage","onerror","err","maxPoints","Math","max","map","h","style","maxWidth","margin","fontFamily","children","fileName","_jsxFileName","lineNumber","columnNumber","display","gap","alignItems","marginBottom","onClick","className","marginLeft","type","checked","onChange","e","target","padding","border","borderRadius","background","house","points","pct","round","width","textAlign","marginRight","flex","height","overflow","paddingLeft","_c","$RefreshReg$"],"sources":["/home/najim/Downloads/hogwarts_leaderboard/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\n\nconst HOUSES = [\"Gryff\", \"Slyth\", \"Raven\", \"Huff\"];\nconst API_BASE = \"http://localhost:5000\";\n\nfunction formatNum(n) {\n  return n.toLocaleString();\n}\n\nexport default function App() {\n  const [windowSel, setWindowSel] = useState(\"all\");\n  const [totals, setTotals] = useState({ Gryff:0, Slyth:0, Raven:0, Huff:0 });\n  const [live, setLive] = useState(false);\n  const esRef = useRef(null);\n\n  async function fetchTotals(win) {\n    const r = await fetch(`${API_BASE}/api/totals?window=${win}`);\n    const j = await r.json();\n    setTotals(j.totals);\n  }\n\n  useEffect(() => { fetchTotals(windowSel); }, [windowSel]);\n\n  useEffect(() => {\n    if (!live) {\n      if (esRef.current) { esRef.current.close(); esRef.current = null; }\n      return;\n    }\n    const es = new EventSource(`${API_BASE}/stream`);\n    es.onmessage = () => { fetchTotals(windowSel); };\n    es.onerror = (err) => { es.close(); esRef.current = null; };\n    esRef.current = es;\n    return () => { es.close(); esRef.current = null; };\n  }, [live, windowSel]);\n\n  const maxPoints = Math.max(...HOUSES.map(h => totals[h] || 0), 1);\n\n  return (\n    <div style={{maxWidth:900, margin:\"20px auto\", fontFamily:\"Arial\"}}>\n      <h2>üèÜ Hogwarts House Cup ‚Äî Leaderboard</h2>\n      <div style={{display:\"flex\", gap:12, alignItems:\"center\", marginBottom:12}}>\n        <div>\n          <button onClick={()=>setWindowSel(\"5m\")} className={windowSel===\"5m\" ? \"sel\":\"\"}>Last 5 minutes</button>\n          <button onClick={()=>setWindowSel(\"1h\")} className={windowSel===\"1h\" ? \"sel\":\"\"}>Last 1 hour</button>\n          <button onClick={()=>setWindowSel(\"all\")} className={windowSel===\"all\" ? \"sel\":\"\"}>All time</button>\n        </div>\n        <div style={{marginLeft:\"auto\"}}>\n          <label><input type=\"checkbox\" checked={live} onChange={(e)=>setLive(e.target.checked)} /> Start Updates</label>\n        </div>\n      </div>\n      <div style={{padding:12, border:\"1px solid #ddd\", borderRadius:8, background:\"#fff\"}}>\n        {HOUSES.map(house => {\n          const points = totals[house] || 0;\n          const pct = Math.round((points / maxPoints) * 100);\n          return (\n            <div key={house} style={{display:\"flex\", alignItems:\"center\", marginBottom:12}}>\n              <div style={{width:90, textAlign:\"right\", marginRight:12}}>{house}</div>\n              <div style={{flex:1, marginRight:12, background:\"#f2f4f7\", height:36, borderRadius:6, overflow:\"hidden\"}}>\n                <div style={{height:\"100%\", width:`${pct}%`, paddingLeft:8}}><strong>{formatNum(points)}</strong></div>\n              </div>\n              <div style={{width:70}}><small>{points}</small></div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}